import numpy as np

def trimmed_mae(y_true, y_pred, percentile=95):
    """
    Вычисляет MAE, исключая верхние (100 - percentile)% ошибок.
    
    Параметры:
    ----------
    y_true : array-like
        Истинные значения.
    y_pred : array-like
        Предсказанные значения.
    percentile : float (по умолчанию 95)
        Процент ошибок, которые учитываются (от 0 до 100).
    
    Возвращает:
    -----------
    float
        Усеченное MAE.
    """
    # Вычисляем абсолютные ошибки
    errors = np.abs(np.array(y_true) - np.array(y_pred))
    
    # Находим порог для заданного перцентиля
    threshold = np.percentile(errors, percentile)
    
    # Фильтруем ошибки, оставляя только <= порога
    filtered_errors = errors[errors <= threshold]
    
    # Возвращаем среднее значение оставшихся ошибок
    return np.mean(filtered_errors)
