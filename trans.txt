def create_classification_prompt(complaint_text, types_file_content, products_file_content):
    """
    Создает промпт для классификации банковских жалоб
    
    Args:
        complaint_text (str): Текст жалобы для классификации
        types_file_content (str): JSON с типами жалоб
        products_file_content (str): JSON с продуктами
    
    Returns:
        str: Готовый промпт для отправки в модель
    """
    
    prompt = f"""
Промпт для классификации банковских жалоб

Задача: Проанализируй текст банковской жалобы и классифицируй ее по двум параметрам: Тип и Продукт. Используй предоставленные справочники для точной классификации.

Справочники для классификации:
{types_file_content}
{products_file_content}

Инструкции по классификации:
1. Анализ текста жалобы: Внимательно прочитай жалобу и выдели ключевые слова, фразы и суть проблемы.
2. Определение Продукта: Сопоставь содержание жалобы с определениями и ключевыми словами из products.json. Выбери наиболее подходящий продукт из списка. Если жалоба затрагивает несколько продуктов, выбери основной.
3. Определение Типа: Используй types_products_short.json для поиска подходящего типа. Учитывай связь между типом и продуктом - тип должен быть связан с выбранным продуктом. Сопоставь ключевые слова из жалобы с type_tags и type_description.

Важные ограничения:
- Используй ТОЛЬКО названия типов и продуктов из предоставленных справочников
- Не придумывай новые названия или категории
- Если нет точного соответствия, выбери наиболее близкий вариант из существующих в справочниках
- Названия типов и продуктов должны точно соответствовать справочникам

Формат ответа:
{{
  "classification": {{
    "type": "название выбранного типа",
    "product": "название выбранного продукта",
    "confidence_level": "высокий/средний/низкий",
    "explanation": "краткое обоснование выбора на основе ключевых слов из текста"
  }}
}}

Текст жалобы для классификации:
{complaint_text}
"""
    
    return prompt

# Пример использования:
# types_content = '{"classification_dictionary": [...]}'  # содержимое types_products_short.json
# products_content = '{"products": [...]}'  # содержимое products.json
# complaint = "Мне навязали страховку при оформлении кредитной карты"
# 
# prompt = create_classification_prompt(complaint, types_content, products_content)
# print(prompt)
